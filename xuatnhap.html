<!-- =================================================
Theme Name: Topper Bootstrap Theme 
Author: WebThemez.com
License: https://webthemez.com/license
======================================================= -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Mirrors Beauty Parlour Website</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">
    <meta content="Author" name="WebThemez">
    <!-- Favicons -->
    <link href="img/favicon.png" rel="icon">
    <link href="img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Raleway:300,400,500,700,800|Montserrat:300,400,700"
        rel="stylesheet">

    <!-- Bootstrap CSS File -->
    <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Libraries CSS Files -->
    <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/ionicons/css/ionicons.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/magnific-popup/magnific-popup.css" rel="stylesheet">
    <link href="lib/ionicons/css/ionicons.min.css" rel="stylesheet">

    <!-- Main Stylesheet File -->
    <link href="css/style.css" rel="stylesheet">

    <script>
        function nhapHang1(dat, b) {
            var request = new XMLHttpRequest();
            var urlHere = "https://api.thingspeak.com/update?";

            urlHere = urlHere + "api_key=34HOHEAUNRXGFV1K&field1=" + dat;
            request.open('GET', urlHere, true);
            request.send();
            setTimeout(function () {
                b();
            }, 5000);
        }

        function xuatHang1(dat, b) {
            var request = new XMLHttpRequest();
            var urlHere = "https://api.thingspeak.com/update?";
            urlHere = urlHere + "api_key=34HOHEAUNRXGFV1K&field2=" + dat;

            if (parseInt(dat) <= tonKhoSP1) {
                request.open('GET', urlHere, true);
                request.send();
            } else {
                alert("Hàng không đủ để xuất, bạn cần bổ sung thêm ít nhất " + (dat - tonKhoSP1) + " để có thể xuất hàng!!");
            }
            setTimeout(function () {
                b();
            }, 5000);
        }
        // -----------------
        function nhapHang2(dat, b) {
            var request = new XMLHttpRequest();
            var urlHere = "https://api.thingspeak.com/update?";

            urlHere = urlHere + "api_key=34HOHEAUNRXGFV1K&field3=" + dat;
            request.open('GET', urlHere, true);
            request.send();
            setTimeout(function () {
                b();
            }, 5000);
        }

        function xuatHang2(dat, b) {
            var request = new XMLHttpRequest();
            var urlHere = "https://api.thingspeak.com/update?";
            urlHere = urlHere + "api_key=34HOHEAUNRXGFV1K&field4=" + dat;

            if (parseInt(dat) <= tonKhoSP2) {
                request.open('GET', urlHere, true);
                request.send();
            } else {
                alert("Hàng không đủ để xuất, bạn cần bổ sung thêm ít nhất " + (dat - tonKhoSP2) + " để có thể xuất hàng!!");
            }
            setTimeout(function () {
                b();
            }, 5000);
        }
        // -----------------
        function nhapHang3(dat, b) {
            var request = new XMLHttpRequest();
            var urlHere = "https://api.thingspeak.com/update?";

            urlHere = urlHere + "api_key=34HOHEAUNRXGFV1K&field5=" + dat;
            request.open('GET', urlHere, true);
            request.send();
            setTimeout(function () {
                b();
            }, 5000);
        }

        function xuatHang3(dat, b) {
            var request = new XMLHttpRequest();
            var urlHere = "https://api.thingspeak.com/update?";
            urlHere = urlHere + "api_key=34HOHEAUNRXGFV1K&field6=" + dat;

            if (parseInt(dat) <= tonKhoSP3) {
                request.open('GET', urlHere, true);
                request.send();
            } else {
                alert("Hàng không đủ để xuất, bạn cần bổ sung thêm ít nhất " + (dat - tonKhoSP3) + " để có thể xuất hàng!!");
            }
            setTimeout(function () {
                b();
            }, 5000);
        }

        function thongKe() {
            var request = new XMLHttpRequest();
            var urlHere = "https://api.thingspeak.com/update?";
            urlHere = "https://api.thingspeak.com/channels/1715997/feeds.json";
            request.open('GET', urlHere, true);
            request.onload = function () {
                if (request.status == 200) {
                    var data = JSON.parse(request.responseText);
                    var length = data.feeds.length;  //kich thuoc du lieu
                    //loc bo cac phan tu null
                    dataNhapSP1 = new Array();
                    dataXuatSP1 = new Array();
                    dataNhapSP2 = new Array();
                    dataXuatSP2 = new Array();
                    dataNhapSP3 = new Array();
                    dataXuatSP3 = new Array();
                    for (i = 0; i < length; i++) {
                        if (data.feeds[i].field1 != null) {
                            dataNhapSP1.push(data.feeds[i].field1);
                        }
                        if (data.feeds[i].field2 != null) {
                            dataXuatSP1.push(data.feeds[i].field2);
                        }
                        if (data.feeds[i].field3 != null) {
                            dataNhapSP2.push(data.feeds[i].field3);
                        }
                        if (data.feeds[i].field4 != null) {
                            dataXuatSP2.push(data.feeds[i].field4);
                        }
                        if (data.feeds[i].field5 != null) {
                            dataNhapSP3.push(data.feeds[i].field5);
                        }
                        if (data.feeds[i].field6 != null) {
                            dataXuatSP3.push(data.feeds[i].field6);
                        }
                    }
                    tongXuatSP1 = 0, tongNhapSP1 = 0, tonKhoSP1 = 0;
                    tongXuatSP2 = 0, tongNhapSP2 = 0, tonKhoSP2 = 0;
                    tongXuatSP3 = 0, tongNhapSP3 = 0, tonKhoSP3 = 0;
                    tongXuat = 0, tongNhap = 0, tonKho = 0;
                    for (i = 0; i < dataXuatSP1.length; i++) {
                        tongXuatSP1 += parseInt(dataXuatSP1[i]);
                    }
                    for (i = 0; i < dataNhapSP1.length; i++) {
                        tongNhapSP1 += parseInt(dataNhapSP1[i]);
                    }
                    for (i = 0; i < dataXuatSP2.length; i++) {
                        tongXuatSP2 += parseInt(dataXuatSP2[i]);
                    }
                    for (i = 0; i < dataNhapSP2.length; i++) {
                        tongNhapSP2 += parseInt(dataNhapSP2[i]);
                    }
                    for (i = 0; i < dataXuatSP3.length; i++) {
                        tongXuatSP3 += parseInt(dataXuatSP3[i]);
                    }
                    for (i = 0; i < dataNhapSP3.length; i++) {
                        tongNhapSP3 += parseInt(dataNhapSP3[i]);
                    }
                    tonKhoSP1 = tongNhapSP1 - tongXuatSP1;
                    tonKhoSP2 = tongNhapSP2 - tongXuatSP2;
                    tonKhoSP3 = tongNhapSP3 - tongXuatSP3;
                    tongXuat = tongXuatSP1 + tongXuatSP2 + tongXuatSP3;
                    tongNhap = tongNhapSP1 + tongNhapSP2 + tongNhapSP3;
                    tonKho = tonKhoSP1 + tonKhoSP2 + tonKhoSP3;
                    document.getElementById("nhapsp1").innerHTML = tongNhapSP1;
                    document.getElementById("xuatsp1").innerHTML = tongXuatSP1;
                    document.getElementById("tonsp1").innerHTML = tonKhoSP1;
                    document.getElementById("nhapsp2").innerHTML = tongNhapSP2;
                    document.getElementById("xuatsp2").innerHTML = tongXuatSP2;
                    document.getElementById("tonsp2").innerHTML = tonKhoSP2;
                    document.getElementById("nhapsp3").innerHTML = tongNhapSP3;
                    document.getElementById("xuatsp3").innerHTML = tongXuatSP3;
                    document.getElementById("tonsp3").innerHTML = tonKhoSP3;
                    document.getElementById("tongnhap").innerHTML = tongNhap;
                    document.getElementById("tongxuat").innerHTML = tongXuat;
                    document.getElementById("tongton").innerHTML = tonKho;
                } else {

                }
            };
            request.send();

            //request.open('GET', urlHere, true);
            //request.send();
        }
    </script>
</head>

<body id="body" onload="thongKe()">
    <section id="topbar" class="d-none d-lg-block">
        <div class="container clearfix">
            <div class="contact-info float-left">
                <i class="fa fa-envelope-o"></i> <a href="mailto:contact@example.com">name@websitename.com</a>
                <i class="fa fa-phone"></i> +1 2345 67855 22
            </div>
            <div class="social-links float-right">
                <a href="#" class="twitter"><i class="fa fa-twitter"></i></a>
                <a href="#" class="facebook"><i class="fa fa-facebook"></i></a>
                <a href="#" class="google-plus"><i class="fa fa-google-plus"></i></a>
                <a href="#" class="linkedin"><i class="fa fa-linkedin"></i></a>
                <a href="#" class="instagram"><i class="fa fa-instagram"></i></a>
            </div>
        </div>
    </section>
    <header id="header">
        <div class="container">

            <div id="logo" class="pull-left">
                <h1><a href="#body" class="scrollto"><span>N</span>hóm 8</a></h1>
            </div>

            <nav id="nav-menu-container">
                <ul class="nav-menu">
                    <li><a href="./index.html">Giới thiệu</a></li>
                    <li><a href="./thanhvien.html">Thành viên</a></li>
                    <li><a href="./ytuong.html">Ý tưởng thực</a></li>
                    <li><a href="./xuatnhap.html">Nhập xuất sản phẩm</a></li>
                    <li><a href="./thongke">Thống kê</a></li>
                    <li><a href="./lienhe">Liên hệ</a></li>

            </nav>
        </div>
    </header>

    <section id="team" class="wow fadeInUp sec-padding">
        <div class="container">
            <div class="section-header">
                <h2>Quản lý xuất nhập mỹ phẩm</h2>
            </div>
            <div class="row">
                <div class="col-lg-4 col-md-6">
                    <div class="member">
                        <div class="pic"><img src="img/sonmoi.jpeg" alt="" style="height: 300px;"></div>
                        <div class="details">
                            <h4>Son môi</h4>

                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6">
                    <div class="member">
                        <div class="pic"><img src="img/kem-nen.png" alt="" style="height: 300px;"></div>
                        <div class="details">
                            <h4>Kem nền</h4>

                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6">
                    <div class="member">
                        <div class="pic"><img src="img/matna.jfif" alt="" style="height: 300px;"></div>
                        <div class="details">
                            <h4>Mỹ phẩm</h4>

                        </div>
                    </div>
                </div>



            </div>
            <div class="row">
                <div class="col-lg-4 col-md-6">
                    <div class="mb-3 row">
                        <label for="inputPassword" class="col-sm-4 col-form-label">Nhập hàng</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" id="nhap1">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="inputPassword" class="col-sm-4 col-form-label">Xuất hàng</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" id="xuat1">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="inputPassword" class="col-sm-4 col-form-label"></label>
                        <div class="col-sm-8">
                            <input class="btn btn-primary" y type="button" value="Nhập"
                                onclick="nhapHang1(nhap1.value,thongKe)">
                            &nbsp;
                            &nbsp;
                            <input class="btn btn-primary" type="button" value="Xuất"
                                onclick="xuatHang1(xuat1.value,thongKe)">
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6">
                    <div class="mb-3 row">
                        <label for="inputPassword" class="col-sm-4 col-form-label">Nhập hàng</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" id="nhap2">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="inputPassword" class="col-sm-4 col-form-label">Xuất hàng</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" id="xuat2">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="inputPassword" class="col-sm-4 col-form-label"></label>
                        <div class="col-sm-8">
                            <input class="btn btn-primary" y type="button" value="Nhập"
                                onclick="nhapHang2(nhap2.value,thongKe)">
                            &nbsp;
                            &nbsp;
                            <input class="btn btn-primary" type="button" value="Xuất"
                                onclick="xuatHang2(xuat2.value,thongKe)">
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6">
                    <div class="member">
                        <div class="mb-3 row">
                            <label for="inputPassword" class="col-sm-4 col-form-label">Nhập hàng</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="nhap3">
                            </div>
                        </div>
                        <div class="mb-3 row">
                            <label for="inputPassword" class="col-sm-4 col-form-label">Xuất hàng</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="xuat3">
                            </div>
                        </div>
                        <div class="mb-3 row">
                            <label for="inputPassword" class="col-sm-4 col-form-label"></label>
                            <div class="col-sm-8">
                                <input class="btn btn-primary" y type="button" value="Nhập"
                                    onclick="nhapHang3(nhap3.value,thongKe)">
                                &nbsp;
                                &nbsp;
                                <input class="btn btn-primary" type="button" value="Xuất"
                                    onclick="xuatHang3(xuat3.value,thongKe)">
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <br> <br>
        <p>Số sản phẩm hiện tại trong kho</p>
        <table class="table table-striped">
            <tr>
                <th>Tên sản phẩm</th>
                <th>Tổng sản phẩm đã nhập</th>
                <th>Tổng sản phẩm đã xuất</th>
                <th>Tồn kho</th>
            </tr>
            <tr>
                <td>Sản phẩm 1</td>
                <td id="nhapsp1">...</td>
                <td id="xuatsp1">...</td>
                <td id="tonsp1">...</td>
            </tr>
            <tr>
                <td>Sản phầm 2</td>
                <td id="nhapsp2">...</td>
                <td id="xuatsp2">...</td>
                <td id="tonsp2">...</td>
            </tr>
            <tr>
                <td>Sản phẩm 3</td>
                <td id="nhapsp3">...</td>
                <td id="xuatsp3">...</td>
                <td id="tonsp3">...</td>
            </tr>
            <tr>
                <th>Tổng</th>
                <td id="tongnhap">...</td>
                <td id="tongxuat">...</td>
                <td id="tongton">...</td>
            </tr>
        </table>
        <form name="form2">
            <input class="btn btn-success" type="button" value="Kiểm tra" onclick="thongKe()">
        </form>

    </section>



    </main>

    <footer id="footer">
        <div class="container">
            <div class="copyright">
                &copy; Đại học cần thơ <strong>Nhóm 8</strong>. Quản lý tồn kho mỹ phẩm
            </div>
        </div>
    </footer>

    <a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>


    <script src="lib/jquery/jquery.min.js"></script>
    <script src="lib/jquery/jquery-migrate.min.js"></script>
    <script src="lib/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/superfish/hoverIntent.js"></script>
    <script src="lib/superfish/superfish.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/magnific-popup/magnific-popup.min.js"></script>
    <script src="lib/sticky/sticky.js"></script>
    <script src="js/main.js"></script>

</body>

</html>